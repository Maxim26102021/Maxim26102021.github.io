(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(t){if(t.ep)return;t.ep=!0;const o=n(t);fetch(t.href,o)}})();let a=new AbortController;const v="https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/party",m="22d71f6573e2e805991b3ea5c8b4fa34b5f8556c";let d=null,u=null;const h=document.querySelector("#party"),r=document.querySelector("#results"),c=document.querySelector(".info"),g=c.querySelector(".row #name_short"),y=c.querySelector(".row #name_full"),L=c.querySelector(".row #inn_kpp"),b=c.querySelector(".row #address");let f={signal:a.signal,method:"POST",mode:"cors",headers:{"Content-Type":"application/json;charset=UTF-8",Accept:"application/json",Authorization:"Token "+m},body:JSON.stringify({query:d})};const _=async(e,s,n)=>{if(n)return s.body=JSON.stringify({query:n}),await fetch(e,s).then(i=>i.text()).then(i=>JSON.parse(i)).catch(i=>console.log("aborted prev",i))},w=e=>{h.value=e.value,g.value=e.data.name.short_with_opf||"нет",y.value=e.data.name.full_with_opf,L.value=`${e.data.inn} / ${e.data.kpp}`,b.value=e.data.address.unrestricted_value},S=(e,s)=>`<button id="${s}" class="search-item">
                <div class="search-item__top">
                    ${e.value}
                </div>
                <div class="search-item__bottom">
                    <div class="search-item__inn">${e.data.inn}</div>
                    <div class="search-item__address">${e.data.address.value}</div>
                </div>
            </button>`,p=e=>{let s=e.target.closest("button"),n=u[s.id];w(n),r.classList.add("hidden"),r.removeEventListener("click",p)},q=()=>{r.addEventListener("click",p)},N=e=>{a=new AbortController;const s=a.signal;f.signal=s,d=e.value,_(v,f,d).then(n=>{n!==void 0&&n.suggestions.length!==0?(r.classList.remove("hidden"),r.classList.add("active"),r.innerHTML="",n.suggestions.forEach((i,t)=>{r.insertAdjacentHTML("beforeend",S(i,t))}),q(),u=n.suggestions):(r.classList.add("hidden"),r.classList.remove("active"),u=null)})},O=(e,s)=>{e.addEventListener("input",()=>{if(e.value===""){a.abort(),r.classList.add("hidden"),r.classList.remove("active");return}s(e)})};O(h,N);let F=document.body;F.addEventListener("click",e=>{r.classList.add("hidden"),r.classList.remove("active")});
